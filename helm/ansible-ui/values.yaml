# Default values for ansible-ui.
# Override these with -f myvalues.yaml or --set key=value

replicaCount: 1
# NOTE: SQLite is single-writer. Keep replicaCount at 1.

image:
  repository: ghcr.io/frobobbo/ansible-ui
  pullPolicy: IfNotPresent
  # Overrides the image tag. Defaults to the chart's appVersion.
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# ── Credentials ──────────────────────────────────────────────────────────────
# Sensitive values are stored in a Kubernetes Secret.
# To bring your own secret, set existingSecret to its name and leave the
# inline values below empty. The secret must contain these keys:
#   JWT_SECRET      — HMAC signing key for JWTs
#   ADMIN_PASSWORD  — initial password for the built-in admin account
secret:
  existingSecret: ""
  jwtSecret: "change-me-in-production-use-a-long-random-string"
  adminPassword: "admin"

# ── Persistent storage ───────────────────────────────────────────────────────
# Stores the SQLite database, uploaded playbooks, vault files, and form images.
persistence:
  enabled: true
  storageClass: ""        # leave empty to use the cluster default
  accessMode: ReadWriteOnce
  size: 2Gi
  existingClaim: ""       # use a pre-existing PVC instead of creating one

# ── Service ──────────────────────────────────────────────────────────────────
service:
  type: ClusterIP
  port: 80
  # nodePort: 30080   # only used when type: NodePort

# ── Ingress ──────────────────────────────────────────────────────────────────
ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - host: ansible-ui.example.com
      paths:
        - path: /
          pathType: Prefix
  tls: []
  #  - secretName: ansible-ui-tls
  #    hosts:
  #      - ansible-ui.example.com

# ── Resources ────────────────────────────────────────────────────────────────
resources: {}
  # requests:
  #   cpu: 100m
  #   memory: 128Mi
  # limits:
  #   cpu: 500m
  #   memory: 256Mi

# ── Probes ───────────────────────────────────────────────────────────────────
livenessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 5
  periodSeconds: 15
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 3
  periodSeconds: 10
  failureThreshold: 3

# ── Scheduling ───────────────────────────────────────────────────────────────
nodeSelector: {}
tolerations: []
affinity: {}

# ── Pod configuration ────────────────────────────────────────────────────────
podAnnotations: {}
podSecurityContext: {}
  # fsGroup: 1000

securityContext: {}
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

serviceAccount:
  create: false
  name: ""
